(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39794],{39794:function(a,b,c){"use strict";c.d(b,{K:function(){return ag},Z:function(){return ah}});var d,e,f=c(20348),g=c(89703),h=c(7760),i=c(82729),j=c(32210),k=c(69943),l=c(82336),m=c.n(l),n=c(64889),o=c(77772),p=c(24225),q=function(a){var b=(null==a?void 0:a.asPath)||"";return/^\/?((answereditor\/\d+)|(pageeditor(\/\d+){3})|(proofread.*))\/?$/.test(b)?p.sL.EDITOR:p.sL.PUBLISHED},r=q,s=c(80049),t=c(46023),u=c(10613),v=c(49425);function w(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function x(a){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function y(a,b){return(y=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var z,A=function(a){return a.edpresso,{selectedDocumentKey:a.comments.selectedDocument.key||null}},B=(0,n.$j)(A),C=function(a){!function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&y(a,b)}(e,a);var b,c,d=(b=e,c=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,d,e,f,g=x(b);if(c){var h=x(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return d=this,(e=f)&&("object"==(a=e,a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof e)?e:function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function e(){var a;return!function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,e),a=d.apply(this,arguments),a.getDocumentKey=function(){var b=a.props,c=b.pageDocumentKey,d=b.componentId;return c?"".concat(c,"/").concat(d):""},a}return e.prototype.render=function(){var a=this.props,b=a.pageDocumentKey,c=a.selectedDocumentKey,d=a.router,e=a.componentId,g=a.children,h=a.inPreview,i=a.widgetType,j=r(d);if(!b||!e||j===p.sL.PUBLISHED)return g;var k=this.getDocumentKey(),l=k===c;return[(0,f.jsx)("div",{className:l&&h?"rounded border p-2.5":"",style:l&&h?{boxShadow:"0px 0px 15px ".concat(t.colors.primary.lightP1)}:{},children:g},"widget_wrapper_global_styled"),(0,f.jsx)(o.Z,{documentKey:k,inPreview:h,widgetType:i},"comment_menu_for_widgets"),]},e}(g.Component),D=(0,s.withRouter)((z=B(C),function(a){var b,c,d,e,g,h,i=(0,v.nF)().collectionArticlePreview,j=(0,u.BV)(),k=null!==(e=null!==(d=null===(b=i.data)|| void 0===b?void 0:b.page_key)&& void 0!==d?d:null===(c=j.data)|| void 0===c?void 0:c.shotKey)&& void 0!==e?e:null;return(0,f.jsx)(z,(g=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){w(a,b,c[b])})}return a}({},a),h=(h={pageDocumentKey:k},h),Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(h)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(h)).forEach(function(a){Object.defineProperty(g,a,Object.getOwnPropertyDescriptor(h,a))}),g))})),E=c(1416),F=c(53026),G=function(a){var b=a.children,c=a.fullScreen,d=a.compId;return(0,f.jsx)("div",{className:c?"fullscreen_wrapper":"",children:(0,f.jsx)("div",{id:"widget-parent-".concat(d),className:c?"fullHeight":"",children:b})})},H=c(30790),I=c(82925),J=c(77887),K=c(27155),L=c(1632),M=c(32388),N=c(41716);function O(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function P(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function Q(a){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function R(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){P(a,b,c[b])})}return a}function S(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}function T(a,b){return(T=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var U=c(52700),V=c(28394);function W(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function X(a){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function Y(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){W(a,b,c[b])})}return a}function Z(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}function $(a,b){if(null==a)return{};var c,d,e=_(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function _(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],b.indexOf(c)>=0||(e[c]=a[c]);return e}function aa(a,b){return(aa=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var ab,ac,ad,ae,af=((d=function(a){(function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&aa(a,b)})(e,a);var b,c,d=(b=e,c=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,d,e,f,g=X(b);if(c){var h=X(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return d=this,(e=f)&&("object"==(a=e,a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof e)?e:function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function e(){var a;return function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,e),a=d.apply(this,arguments),a.state={fullScreen:!1},a.component=g.createRef(),a.toggleFullScreen=function(b){var c=a.state.fullScreen;c?(a.appDiv.removeChild(a.portalParent),a.currentDiv.current.appendChild(a.portalParent)):(a.currentDiv.current.removeChild(a.portalParent),a.appDiv.appendChild(a.portalParent)),a.setState({fullScreen:!c},"function"!=typeof b?function(){}:b)},a.handleKeyDown=function(b){(b.keyCode===m().codes.f11&&b.ctrlKey&&!a.state.fullScreen||b.keyCode===m().codes.esc&&a.state.fullScreen)&&(b.preventDefault(),b.stopPropagation(),a.toggleFullScreen())},a.portalParent="undefined"!=typeof document&&document.createElement("div"),a.currentDiv=g.createRef(),a.focusDiv=g.createRef(),a.appDiv="undefined"!=typeof document&&document.getElementById("__next"),a.selectPlaceholder=function(){var b=a.props.comp.type;return["Code","TabbedCode","RunJS","WebpackBin","Android"].includes(b)?E.placeholderCodeWidget:["Columns","RecruitingCostCalculator"].includes(b)?E.placeholderColumnsWidget:["Image","CanvasAnimation","Chart","MxGraphWidget","DrawIOWidget","Video","TerminalWidget","LiveApp","Latex","Quiz",].includes(b)?E.placeholderImageWidget:["SpoilerEditor","ButtonLink","File","EnvVariableButton"].includes(b)?E.placeholderLineWidget:["Carousel"].includes(b)?E.placeholderCarouselWidget:["Matrix","NaryTree","BinaryTree","EducativeArray","HashTable","LinkedList","Stack","Graphviz","SequenceDiagrams",].includes(b)?E.placeholderDSWidget:E.placeholderTextWidget},a}var l=e.prototype;return l.componentDidMount=function(){var a;null===(a=this.currentDiv.current)|| void 0===a||a.appendChild(this.portalParent)},l.componentDidUpdate=function(a,b){var c,d,e,f,g,h,i;a.saveVersion!==this.props.saveVersion&&(null===(d=this)|| void 0===d||null===(e=d.component)|| void 0===e||null===(f=e.current)|| void 0===f||null===(g=f.saveComponent)|| void 0===g||g.call(f),null===(i=(h=this.props).runPendingAction)|| void 0===i||i.call(h)),this.state.fullScreen!==b.fullScreen&&this.state.fullScreen&&(null===(c=this.focusDiv)|| void 0===c?void 0:c.current)&&this.focusDiv.current.focus()},l.shouldComponentUpdate=function(a,b){if(a.alwaysUpdate||this.props.renderMode===M._zD.VIEWER||(null===(c=a.comp)|| void 0===c?void 0:c.contentID)!==(null===(d=this.props.comp)|| void 0===d?void 0:d.contentID)||this.state.fullScreen!==b.fullScreen)return!0;var c,d,e,f,g,h,i,k,l,m=this.props,n=m.authorId,o=m.contentSnapshot,p=m.defaultCourseLanguage,q=m.editingApiKeys,r=m.executionMetadata,s=m.iteration,t=m.mode,u=m.saveVersion,v=m.userThemes,w=m.vimMode;if(n!==a.authorId||o!==a.contentSnapshot||p!==(null==a?void 0:a.defaultCourseLanguage)||q!==a.editingApiKeys||(null==r?void 0:r.loaded)!==(null===(e=a.executionMetadata)|| void 0===e?void 0:e.loaded)||s!==a.iteration||t!==a.mode||u!==a.saveVersion||v!==a.userThemes||w!==a.vimMode||(null===(f=this.props.widgetsData)|| void 0===f?void 0:f.copiedWidget)!==(null===(g=a.widgetsData)|| void 0===g?void 0:g.copiedWidget))return!0;var x=null!==(k=this.props.docker)&& void 0!==k?k:{},y=x.container,z=x.envs,A=x.jobs,B=null!==(l=a.docker)&& void 0!==l?l:{},C=B.container,D=B.envs,E=B.jobs;return!((null==y?void 0:y.buildStatus)===(null==C?void 0:C.buildStatus)&&(null==y?void 0:null===(h=y.liveInstance)|| void 0===h?void 0:h.id)===(null==C?void 0:null===(i=C.liveInstance)|| void 0===i?void 0:i.id)&&j.equals(z,D)&&j.equals(A,E))|| !this.props.apiKeysChanged&&!!a.apiKeysChanged|| !!this.props.askForHelp&&this.props.askForHelp!==a.askForHelp},l.canToggleFullscreen=function(){return!this.props.inModal},l.saveComponent=function(){var a,b;null===(a=this.component.current)|| void 0===a||null===(b=a.saveComponent)|| void 0===b||b.call(a)},l.render=function(){var a,b,c=this,d=this.props,e=d.comp,g=d.logWidgetInteraction,j=d.widgetsData,l=d.allowComments,m=$(d,["comp","logWidgetInteraction","widgetsData","allowComments"]),n=null!==(b=null==e?void 0:null===(a=e.content)|| void 0===a?void 0:a.comp_id)&& void 0!==b?b:"",o=this.props.default_themes,p=e,q=p.content,r=p.hash,s=p.type;"LinkButton"===s&&(s="ButtonLink");var t=this.selectPlaceholder(),u=this.props.renderMode===M._zD.VIEWER?F.ZP:F.tC,v=function(a){var b=a.disabled,d=a.onClick,e=a.style,g=a.position,h=void 0===g?M.YS6:g,j=$(a,["disabled","onClick","style","position"]);return!!(c.state.fullScreen||c.canToggleFullscreen())&&(0,f.jsx)(i.default,{onClick:void 0===d?function(){}:d,overlay:c.state.fullScreen?"Exit (ESC)":"Full screen",parentClasses:"".concat(b?"cursor-wait dark:focus:text-gray-900 dark:hover:text-gray-900 focus:cursor-wait focus:text-gray-600 hover:cursor-wait hover:text-gray-600 text-gray-600":"cursor-pointer dark:hover:text-primary-light hover:text-primary"," duration-200 flex hover:scale-110 ml-auto sm:block tailwind-hidden transform"),position:h,style:void 0===e?{}:e,children:c.state.fullScreen?(0,f.jsx)(U.Z,Y({className:"h-4 w-4"},j)):(0,f.jsx)(V.Z,Y({className:"h-4 w-4"},j))},Number(c.state.fullScreen))},w=(0,f.jsx)(k.df,{triggerOnce:!0,children:function(a){var b=a.inView,d=a.ref,e=(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(G,{fullScreen:c.state.fullScreen,compId:n,children:(0,f.jsx)(u,Z(Y({inView:b},m),{type:s,hash:r,lesson_info:c.props.lesson_info,className:"widget",default_themes:o,contentStateFinalized:c.props.contentStateFinalized,forwardedRef:c.component,content:q,docker:c.props.docker,logWidgetInteraction:g(s),widgetsData:j,userThemes:c.props.userThemes,vimMode:c.props.vimMode,fallback:(0,f.jsx)("div",{className:"mb-5 w-full",children:t}),toggleFullScreen:c.toggleFullScreen,fullScreen:c.state.fullScreen,fullscreenIconToggle:v}))})}),h=e;return l&&(h=(0,f.jsx)(D,{componentId:n,inPreview:"view"===c.props.mode,widgetType:s,children:e})),(0,f.jsx)("div",Z(Y({ref:c.focusDiv},c.canToggleFullscreen()?{onKeyDown:c.handleKeyDown,tabIndex:0,style:{outline:"none"}}:{}),{children:(0,f.jsx)("div",{ref:d,children:h})}))}});return F.ZP?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{ref:this.currentDiv,children:"Image"===s&&w}),"Image"!==s&&this.portalParent&&h.createPortal(w,this.portalParent)]}):(console.error("invalid component - ".concat(e)),(0,f.jsxs)("p",{children:["Invalid Object with type - ",s]}))},e}(g.Component)).defaultProps={logWidgetInteraction:function(a){return function(b){return{x:a,y:b}}},docker:{},userThemes:null,vimMode:!1,apiKeysChanged:!1,inModal:!1,allowComments:!0,editingApiKeys:!1,alwaysUpdate:!1},d),ag=(ab=af,ac=function(a){return{updateUserApiKeys:function(b){return function(c,d,e){return(0,J.Q)(c,d,e,b)(a)}},saveDockerEnvs:function(b){var c=b.envs;return a(K.ry.saveEnvs({envs:void 0===c?[]:c}))},dispatch:a}},ad=(0,n.$j)(null,ac),ae=function(a){!function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&T(a,b)}(e,a);var b,c,d=(b=e,c=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,d,e,f,g=Q(b);if(c){var h=Q(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return d=this,(e=f)&&("object"==(a=e,a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof e)?e:function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function e(){var a;return!function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,e),a=d.apply(this,arguments),a.state={tabIndex:0},a.onTabChange=function(b){a.setState({tabIndex:b}),a.context.setWidgetState({})},a.upgradeWebpackSelectedEnvVars=function(b){var c,d,e,f=b.content.selectedEnvVars||{};return 0===Object.keys(f).length&&(null===(c=a.props)|| void 0===c||null===(d=c.docker)|| void 0===d||null===(e=d.envs)|| void 0===e||e.forEach(function(a){f=S(R({},f),P({},a.id,!0))})),f},a.getUpdatedSelectedEnvVars=function(b){var c,d;return["WebpackBin","Android","VNC"].includes(null==b?void 0:b.type)&&4>=parseInt(null===(c=b.content)|| void 0===c?void 0:c.version,10)?a.upgradeWebpackSelectedEnvVars(b):(null==b?void 0:null===(d=b.content)|| void 0===d?void 0:d.selectedEnvVars)||{}},a}return e.prototype.render=function(){var a,b,c=this.props,d=c.authorId,e=c.userId,g=c.collectionId,h=c.shotId,i=c.editorPageId,j=c.comp,k=c.apiKeys,l=c.userApiKeys,m=c.updateUserApiKeys,n=c.saveDockerEnvs,o=c.compId,p=c.docker,q=c.enableApiKeys,r=c.isPlan,s=c.askForHelp,t=c.loadAskForHelp,u=c.organizationId;if(!M.tMW.includes(null===(z=this.props.comp)|| void 0===z?void 0:z.type))return(0,f.jsx)(ab,R({},this.props));var v=this.context.widgetState,w=j.type,x={},y=this.props;if("TabbedCode"===w){var z,A,B,C,D,E,F,G,J,K,N,P,Q,T,U=this.state.tabIndex;if(!this.props.isDraft){var V=(0,L.u)("".concat(e,"_").concat(g));U=(null==(V=JSON.parse(V))?void 0:V.key)||this.state.tabIndex}x=null!==(T=null==j?void 0:null===(N=j.content)|| void 0===N?void 0:null===(P=N.codeContents)|| void 0===P?void 0:null===(Q=P[U])|| void 0===Q?void 0:Q.selectedApiKeys)&& void 0!==T?T:{},y=S(R({},y),{onTabChange:this.onTabChange,activeTab:U})}else x=null!==(K=null==j?void 0:null===(A=j.content)|| void 0===A?void 0:A.selectedApiKeys)&& void 0!==K?K:{};var W=this.getUpdatedSelectedEnvVars(j),X=null!==(a=x&&Object.keys(x).filter(function(a){return x[a].extract}).map(function(a){return k.find(function(b){return b.id===a})}))&& void 0!==a?a:[],Y=null!==(b=x&&Object.keys(x).filter(function(a){return x[a].required}).map(function(a){return k.find(function(b){return b.id===a})}))&& void 0!==b?b:[];Y=k.filter(function(a){return Y.includes(a)});var Z,$=(null==p?void 0:null===(B=p.container)|| void 0===B?void 0:B.imageName)!=="",_=(null==p?void 0:p.envs)||[],aa=null==j?void 0:null===(C=j.content)|| void 0===C?void 0:C.dockerJob,ac="TerminalWidget"===w,ad=$&&(Object.keys(null!=aa?aa:{}).length||ac)&&(function(a){if(Array.isArray(a))return O(a)}(Z=_)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(Z)||function a(b,c){if(b){if("string"==typeof b)return O(b,c);var d=Object.prototype.toString.call(b).slice(8,-1);if("Object"===d&&b.constructor&&(d=b.constructor.name),"Map"===d||"Set"===d)return Array.from(d);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return O(b,c)}}(Z)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())||[],ae=(null===(D=j.content)|| void 0===D?void 0:D.readOnlyApiKeys)||!1,af="RunJS"===w&&(null==j?void 0:null===(E=j.content)|| void 0===E?void 0:null===(F=E.jotted)|| void 0===F?void 0:F.autoRun);return q&&(k.length||_.length)&&(ad.length||Y.length||X.length)?(0,f.jsx)(I.Z,{requiredEnvKeys:ad,requiredApiKeys:Y,toExtractApiKeys:X,userApiKeys:l,updateUserApiKeys:m((0,H.Z)(this.props.router.asPath)||i&&!e),saveDockerEnvs:n,params:{authorId:d,collectionId:g,shotId:h,editorPageId:i},requiredEditMode:v.compId===o&&"required"===v.type,extractedEditMode:v.compId===o&&"extraction"===v.type,envEditMode:v.compId===o&&"env"===v.type,compId:o,widgetVersion:null==j?void 0:null===(G=j.content)|| void 0===G?void 0:G.version,widgetType:w,setWidgetWrapper:this.context.setWidgetState,isTerminalWidget:ac,selectedEnvVars:W,onTabChange:this.onTabChange,isDraft:(0,H.Z)(this.props.router.asPath)||this.props.isDraft,pageType:this.props.pageType,readOnlyApiKeys:ae,hideWrapper:af,isPlan:r,askForHelp:s,loadAskForHelp:t,organizationId:u,apiKeys:this.props.apiKeys,comp:this.props.comp,courseCloudLab:this.props.courseCloudLab,docker:null===(J=this.props)|| void 0===J?void 0:J.docker,children:(0,f.jsx)(ab,R({},y))}):(0,f.jsx)(ab,R({},y))},e}(g.Component),ae.contextType=N.Mv,ae.defaultProps={apiKeys:[],userApiKeys:{},authorId:null,collectionId:null,enableApiKeys:!1},(0,s.withRouter)(ad(ae))),ah=af},82925:function(a,b,c){"use strict";var d=c(32176),e=c.n(d),f=c(20348),g=c(89703),h=c(72214),i=c(84375),j=c(97245),k=c(63910),l=c(82729),m=c(76830),n=c(786),o=c.n(n),p=c(46533),q=c(52863),r=c(32388),s=c(34953),t=c(9451),u=c(62474),v=c.n(u),w=c(63778),x=c(32210),y=c(1579),z=c(34001);function A(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function B(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function C(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function D(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){C(f,d,e,g,h,"next",a)}function h(a){C(f,d,e,g,h,"throw",a)}g(void 0)})}}function E(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function F(a){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function G(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){E(a,b,c[b])})}return a}function H(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}function I(a,b){return(I=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function J(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(a,b){var c,d,e=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(i){h=!0,d=i}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}}(a,b)||K(a,b)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(a,b){if(a){if("string"==typeof a)return A(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return A(a,b)}}var L=function(a,b,c){return["border-0 border-b border-solid border-gray-100 dark:border-dark-60",a&&"hover:bg-primary-lightP2 dark:hover:bg-gray-A100 dark:hover:text-dark-contrastText hover:border hover:border-solid hover:border-gray-300",b&&"!bg-error-lightP2 dark:!bg-error-dark",c&&"!bg-gray-200 dark:!bg-dark-70 mb-10",].filter(Boolean).join(" ")},M="hide_req_wrapper",N=function(a){!function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&I(a,b)}(n,a);var b,c,d=(b=n,c=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,d,e,f,g=F(b);if(c){var h=F(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return d=this,(e=f)&&("object"==(a=e,a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof e)?e:B(d)});function n(){!function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,n),a=d.apply(this,arguments),a.state={userEnvKeys:{},userRequiredKeys:{},userExtractedKeys:{},apiKeysChanged:!1,unReplacedKeys:[],unReplacedEnv:[],extractionBlocked:!1,hideRequiredPanel:!!k.rV(M),hideEnvPanel:!!k.rV(M),importError:!1,isEnvMissing:!1,importedKeys:[],isImported:!1,importEditMode:!1,noKeysFound:!1,bypassEnvCheck:!1},a.requiredFocussedKey="",a.envFocussedKey="",a.extractedFocussedKey="",a.componentDidMount=function(){window.addEventListener("keydown",a.keydownHandler,!0),a.populateApiKeys(),w.YB.add(w.E$.EXTRACT,a.processExtraction)},a.processExtraction=function(b){b.detail.compId===a.props.compId&&a.extract(b.detail.vmPassword)};var a,b,c=B(a);return a.extract=(b=D(e().mark(function a(b){var d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,x,y,z,A,B;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,d=c.props.docker.container.liveInstance.url,a.next=4,fetch(d+"/getenv",{method:"GET",headers:{Authorization:b||"","ID-Port":"true"}});case 4:return f=a.sent,a.next=7,f.json();case 7:for(g=a.sent,h=new Set,i=c.props.comp.content.selectedApiKeys,j=!0,k=!1,l=void 0,a.prev=11,m=Object.entries(i)[Symbol.iterator]();!(j=(n=m.next()).done);j=!0)p=(o=J(n.value,2))[0],(q=o[1]).extract&&h.add(p);a.next=19;break;case 15:a.prev=15,a.t0=a.catch(11),k=!0,l=a.t0;case 19:a.prev=19,a.prev=20,j||null==m.return||m.return();case 22:if(a.prev=22,!k){a.next=25;break}throw l;case 25:return a.finish(22);case 26:return a.finish(19);case 27:for(t in r=c.props.apiKeys,s=new Set,r)h.has(r[t].id)&&s.add(r[t].name);for(x in u={},v=g.split("\r\n"))z=(y=v[x].split("="))[0],A=y[1],s.has(z)&&(u[z]=A);c.renderExtractionWrapper(u),B={compId:c.props.compId},Object.keys(u).length>0?B.is_extracted=!0:B.is_extracted=!1,w.YB.dispatch(w.E$.IS_EXTRACTED,B),a.next=42;break;case 39:a.prev=39,a.t1=a.catch(0),console.log(a.t1);case 42:case"end":return a.stop()}},a,null,[[0,39],[11,15,19,27],[20,,22,26]])})),function(a){return b.apply(this,arguments)}),a.componentDidUpdate=function(b){var c,d,e=b.userApiKeys.loading,f=a.props.userApiKeys.loading;b.requiredEditMode&&!a.props.requiredEditMode&&(a.closeRequiredWrapper(!0,!0),a.requiredFocussedKey=""),b.envEditMode&&!a.props.envEditMode&&(a.closeEnvWrapper(!0,!0),a.envFocussedKey=""),b.extractedEditMode&&!a.props.extractedEditMode&&(a.closeExtractionWrapper(!0,!0),a.extractedFocussedKey="");var g=x.equals(null===(c=a.props)|| void 0===c?void 0:c.requiredApiKeys,null==b?void 0:b.requiredApiKeys),h=x.equals(null===(d=a.props)|| void 0===d?void 0:d.requiredEnvKeys,null==b?void 0:b.requiredEnvKeys);(!e||f)&&g&&h||a.populateApiKeys()},a.componentWillUnmount=function(){a.props.setWidgetWrapper({}),w.YB.remove(w.E$.EXTRACT,a.processExtraction)},a.requiredWrapper=null,a.extractedWrapper=null,a.envWrapper=null,a.populateApiKeys=function(){var b=arguments.length>0&& void 0!==arguments[0]&&arguments[0],c=arguments.length>1&& void 0!==arguments[1]&&arguments[1],d=arguments.length>2&& void 0!==arguments[2]&&arguments[2],e=a.props,f=e.userApiKeys,g=e.requiredEnvKeys,h=e.requiredApiKeys,i=e.toExtractApiKeys,j=G({},a.state.userEnvKeys),k=G({},a.state.userRequiredKeys),l=G({},a.state.userExtractedKeys);g.forEach(function(a){if(null==a?void 0:a.id){var b,c,e,g=null==f?void 0:null===(b=f.keys)|| void 0===b?void 0:b[a.id],h=null==j?void 0:null===(c=j[a.id])|| void 0===c?void 0:c.val,i=(null==j?void 0:null===(e=j[a.id])|| void 0===e?void 0:e.dirty)||!1;j=H(G({},j),E({},a.id,{val:!d&&i?h:g,dirty:!d&&i}))}}),Object.keys(null!=j?j:{}).length&&a.saveDockerEnvVariables(j),h.forEach(function(c){if(null==c?void 0:c.id){var d,e,g,h=null==f?void 0:null===(d=f.keys)|| void 0===d?void 0:d[c.id],i=null==k?void 0:null===(e=k[c.id])|| void 0===e?void 0:e.val,j=(null==k?void 0:null===(g=k[c.id])|| void 0===g?void 0:g.dirty)||!1,l=!b&&j?i:h,m="";m=void 0===l&&(a.props.isDraft||c.useAsDefault)?c.value:l,k=H(G({},k),E({},c.id,{val:m,dirty:!b&&j}))}}),i.forEach(function(a){if(null==a?void 0:a.id){var b,d,e,g=null==f?void 0:null===(b=f.keys)|| void 0===b?void 0:b[a.id],h=null==l?void 0:null===(d=l[a.id])|| void 0===d?void 0:d.val,i=(null==l?void 0:null===(e=l[a.id])|| void 0===e?void 0:e.dirty)||!1;l=H(G({},l),E({},a.id,{val:!c&&i?h:g,dirty:!c&&i}))}}),a.setState({userEnvKeys:j,userRequiredKeys:k,userExtractedKeys:l,apiKeysChanged:!0},function(){a.setState({apiKeysChanged:!1})})},a.setEnvKeyValue=function(b,c){var d=b.target.value.trim();a.setState(function(a){return{userEnvKeys:H(G({},a.userEnvKeys),E({},c,{val:d,dirty:!0}))}})},a.setRequiredKeyValue=function(b,c){var d=b.target.value.trim();a.setState(function(a){return{userRequiredKeys:H(G({},a.userRequiredKeys),E({},c,{val:d,dirty:!0}))}})},a.setExtractedKeyValue=function(b,c){var d=b.target.value.trim();a.setState(function(a){return{userExtractedKeys:H(G({},a.userExtractedKeys),E({},c,{val:d,dirty:!0}))}})},a.updateDirty=function(b,c){var d=a.state,e=d.userEnvKeys,f=d.userRequiredKeys,g=d.userExtractedKeys,h=function(d,e){b in d&&a.setState(E({},e,H(G({},d),E({},b,{val:c,dirty:!1}))))};h(e,"userEnvKeys"),h(f,"userRequiredKeys"),h(g,"userExtractedKeys")},a.saveDockerEnvVariables=function(b){var c=a.props.saveDockerEnvs,d=a.props.requiredEnvKeys.map(function(a){var c,d;return H(G({},a),{value:(null==b?void 0:null===(c=b[a.id])|| void 0===c?void 0:c.val)===void 0?a.value||"":(null==b?void 0:null===(d=b[a.id])|| void 0===d?void 0:d.val)||""})});c({envs:d})},a.saveAlluserStateKeys=function(b,c){var d=arguments.length>2&& void 0!==arguments[2]&&arguments[2],e=a.props,f=e.userApiKeys,g=e.updateUserApiKeys,h=e.params,i=Object.keys(b).filter(function(a){var c;return(null==f?void 0:null===(c=f.keys)|| void 0===c?void 0:c[a])!==b[a].val});if(!i.length){c(!0);return}var j=i.reduce(function(a,c){return a=H(G({},a),E({},c,b[c].val||""))},{});d&&a.saveDockerEnvVariables(b),g(h,j,"UPDATE"),c(!0)},a.handlerAction=function(a,b){return function(c,d){!c||(d?a(c,d)||b(c,d):a(c)||b(c))}},a.handlerActionExecute=function(b){var c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:void 0,d=arguments.length>2&& void 0!==arguments[2]?arguments[2]:void 0,e=arguments.length>3&& void 0!==arguments[3]?arguments[3]:void 0,f=a.props,g=f.requiredEditMode,h=f.extractedEditMode,i=f.envEditMode;g?b(a.requiredFocussedKey,c):h?b(a.extractedFocussedKey,d):i&&b(a.envFocussedKey,e)},a.keydownHandler=function(b){var c=b.metaKey,d=b.ctrlKey,e="s"===b.key,f=a.state,g=f.userRequiredKeys,h=f.userExtractedKeys,i=f.userEnvKeys,j=a.props,k=j.requiredEditMode,l=j.extractedEditMode,m=j.envEditMode;if((c||d)&&e){b.preventDefault(),k&&a.saveAlluserStateKeys(g,a.closeRequiredWrapper),l&&a.saveAlluserStateKeys(h,a.closeExtractionWrapper),m&&a.saveAlluserStateKeys(i,a.closeEnvWrapper,!0);return}},a.renderExtractionWrapper=function(b){var c=a.props,d=c.requiredEditMode,e=c.toExtractApiKeys;if(0!==Object.keys(null!=b?b:{}).length&&0!==Object.keys(null!=e?e:{}).length){if(d){a.setState({extractionBlocked:!0});return}a.setState({extractionBlocked:!1});var f=e.reduce(function(a,c){var d=c.id,e=c.key;return e in b?H(G({},a),E({},d,{val:b[e],dirty:!0})):a},a.state.userExtractedKeys),g=a.props,h=g.setWidgetWrapper,i=g.compId;h({type:"extraction",compId:i}),a.extractedFocussedKey="",a.setState({userExtractedKeys:f},function(){var b;(null===(b=a.extractedWrapper)|| void 0===b?void 0:b.scrollIntoView)&&a.extractedWrapper.scrollIntoView({behavior:"smooth",block:"start"})})}},a.renderReplacementWrapper=function(b){var c=arguments.length>1&& void 0!==arguments[1]&&arguments[1],d=a.props,e=d.setWidgetWrapper,f=d.compId,g=d.requiredEditMode,h=d.envEditMode;if(!b.length){(c?h:g)&&e({});return}e({type:c?"env":"required",compId:f}),a.requiredFocussedKey="",a.setState({unReplacedEnv:c?b:[],unReplacedKeys:c?[]:b,isEnvMissing:c},function(){var b=c?a.envWrapper:a.requiredWrapper;(null==b?void 0:b.scrollIntoView)&&b.scrollIntoView({behavior:"smooth",block:"start"})})},a.renderEnvsWrapper=function(){var b=a.props,c=b.setWidgetWrapper,d=b.compId;c({type:"env",compId:d}),a.envFocussedKey=""},a.closeEnvWrapper=function(b){var c=arguments.length>1&& void 0!==arguments[1]&&arguments[1];a.populateApiKeys(!1,!1,b),!c&&(0,a.props.setWidgetWrapper)({}),a.setState({isEnvMissing:!1,unReplacedEnv:[]})},a.closeRequiredWrapper=function(b){var c=arguments.length>1&& void 0!==arguments[1]&&arguments[1];a.populateApiKeys(b,!1,!1),!c&&(0,a.props.setWidgetWrapper)({}),a.setState({unReplacedKeys:[]})},a.closeExtractionWrapper=function(b){var c=arguments.length>1&& void 0!==arguments[1]&&arguments[1];a.populateApiKeys(!1,b,!1),!c&&(0,a.props.setWidgetWrapper)({})},a.setFocussedKey=function(b){var c=a.props,d=c.requiredEditMode,e=c.extractedEditMode,f=c.envEditMode;d&&(a.requiredFocussedKey=b),e&&(a.extractedFocussedKey=b),f&&(a.envFocussedKey=b)},a.determineFocus=function(a,b){var c="",d="";return a.forEach(function(a){var e;a.id in b&&""===d&&(d=a.id),(null==b?void 0:null===(e=b[a.id])|| void 0===e?void 0:e.val)===""&&""===c&&(c=a.id)}),c||(c=d),c},a.returnFocussedKey=function(b,c,d,e){return c?b||a.determineFocus(d,e):""},a.determineFocusRequired=function(){var b=a.props,c=b.requiredApiKeys,d=b.requiredEditMode,e=a.state.userRequiredKeys;return a.requiredFocussedKey=a.returnFocussedKey(a.requiredFocussedKey,d,c,e),a.requiredFocussedKey},a.determineFocusExtraction=function(){var b=a.props,c=b.toExtractApiKeys,d=b.extractedEditMode,e=a.state.userExtractedKeys;return a.extractedFocussedKey=a.returnFocussedKey(a.extractedFocussedKey,d,c,e),a.extractedFocussedKey},a.determineFocusEnv=function(){var b=a.props,c=b.requiredEnvKeys,d=b.envEditMode,e=a.state.userEnvKeys;return a.envFocussedKey=a.returnFocussedKey(a.envFocussedKey,d,c,e),a.envFocussedKey},a.handleReqWrapperHide=function(b){b?a.setState(function(a){return{hideEnvPanel:!a.hideEnvPanel}},function(){a.state.hideEnvPanel?k.LS(M,!0):k.cl(M)}):a.setState(function(a){return{hideRequiredPanel:!a.hideRequiredPanel}},function(){a.state.hideRequiredPanel?k.LS(M,!0):k.cl(M)})},a.importFile=function(b){var c=a.props.requiredApiKeys,d=b.target.files[0];if(d){var e=new FileReader;e.readAsText(d),e.onload=function(b){var d={};try{var e=b.target.result.replace(/\\/g,"\\\\");d=JSON.parse(e);var f=c.map(function(a){return!!d[a.key]&&{key:a.key,val:d[a.key]}}).filter(Boolean);a.setState({importedKeys:f,isImported:f.length>0,noKeysFound:!(f.length>0)})}catch(g){return a.setState({importError:!0}),null}}}},a.saveImportedKeys=function(){var b=a.state,c=b.userRequiredKeys,d=b.importedKeys,e=a.props.requiredApiKeys,f="";e.map(function(a){return d.find(function(b){return f=b.val,a.key===b.key})&&(c=o()(c,E({},a.id,{$set:{val:f,dirty:!0}}))),null}),a.setState({userRequiredKeys:c,importError:!1,importEditMode:!1,isImported:!1,importedKeys:[]},function(){return a.saveAlluserStateKeys(c,a.closeRequiredWrapper)})},a}return n.prototype.render=function(){var a=this,b=this.props,c=b.requiredEnvKeys,d=b.envEditMode,k=b.requiredApiKeys,n=b.toExtractApiKeys,u=b.userApiKeys,w=b.selectedEnvVars,x=b.courseCloudLab,A=b.pageType,B=this.state,C=B.userEnvKeys,F=B.userRequiredKeys,I=B.userExtractedKeys,J=B.apiKeysChanged,K=B.unReplacedKeys,M=B.unReplacedEnv,N=B.extractionBlocked,O=B.isEnvMissing,P=this.props,Q=P.requiredEditMode,R=P.extractedEditMode,S="Values for some API keys are not provided. Provide them here to use throughout the ".concat("collection"===A?"course":"blog",". Otherwise disable this prompt by removing API key placeholders from code.");N&&(S+=" This code extracts some keys. Key extraction will be blocked till all required keys are entered:");var T=function(b,c,k,n,w,A,B,C,F,I,J,N){var P,S=arguments.length>12&& void 0!==arguments[12]&&arguments[12],T=a.state.hideEnvPanel&&!d,U=!K.length&&!M.length&&a.state.hideRequiredPanel&&!Q,V=n.filter(function(a){var b,c=a.id;return!!(null==w?void 0:null===(b=w[c])|| void 0===b?void 0:b.val)}),W=a,X=(P=D(e().mark(function a(){var b,c,d,f;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=(V||[]).filter(function(a){return!x||!y.s.includes(a.id)}).reduce(function(a,b){var c=b.id;return H(G({},a),E({},c,""))},{}),d=(c=W.props).updateUserApiKeys,f=c.params,a.next=4,d(f,b,"UPDATE");case 4:Object.keys(b).forEach(function(a){W.updateDirty(a,b[a])});case 5:case"end":return a.stop()}},a)})),function(){return P.apply(this,arguments)}),Y=!1,Z=a.props.readOnlyApiKeys,$=Z&&!N,_=(!N||N&&O)&&Boolean(N?M.length:K.length);return(0,f.jsxs)("div",{className:"flex w-full flex-col border border-solid bg-gray-100 dark:bg-dark-80 ".concat(_?"border-error-dark dark:border-error-light":"border-gray-300 dark:border-dark-60"),ref:b,"data-testid":"edcomponent-api-wrapper",children:[I?(0,f.jsxs)("div",{className:"flex flex-row items-center justify-between px-5 py-1.5  ".concat(L(!0,S,!1)),"data-testid":"edcomponent-title",onClick:function(){N?d||a.handleReqWrapperHide(N):Q||a.handleReqWrapperHide(N)},children:[(0,f.jsxs)("div",{className:"flex items-center",children:[S&&(0,f.jsx)(m.Z,{className:"mr-2 h-6 w-6"}),!$&&(0,f.jsx)("span",{children:k}),S&&N&&(0,f.jsx)("button",{className:"outlined-default m-2 py-2",onClick:function(){a.setState({bypassEnvCheck:!0},function(){a.closeEnvWrapper(!1),a.renderEnvsWrapper()})},children:"Continue anyway?"})]}),(0,f.jsx)(h.Z,{icon:"ChevronUp",rotate:N?T:U,size:24,margin:5,disabled:c})]}):!$&&(0,f.jsx)("div",{className:"flex flex-row items-center justify-between px-5 py-1.5 ".concat(L(!1,S,!1)),"data-testid":"edcomponent-title",children:k}),(0,f.jsxs)("div",{className:"flex flex-col justify-start transition duration-500\n            ".concat(I&&(N?T:U)?"hidden":"","\n          ").concat(I&&$?"mb-5":"","\n            "),"data-testid":"edcomponent-keysWrapper",children:[n.map(function(b,d){var e,h,i,j,k=null==w?void 0:null===(e=w[b.id])|| void 0===e?void 0:e.dirty,m=k?null==w?void 0:null===(j=w[b.id])|| void 0===j?void 0:j.val:(null==w?void 0:null===(h=w[b.id])|| void 0===h?void 0:h.val)!==void 0?(null==w?void 0:null===(i=w[b.id])|| void 0===i?void 0:i.val)||"":b.value||"";m="string"==typeof m?m.replace(/\s/g,""):m,Y=Y||k;var n=N?-1!==M.indexOf(b.key):-1!==K.indexOf(b.key),o=(null==x?void 0:x.can_start_session)&&y.s.includes(b.key),z=(0,f.jsx)("div",{className:"flex text-gray-800",children:o?"Run to auto-generate...":"Not Specified..."});return(0,f.jsxs)(g.Fragment,{children:[(0,f.jsxs)("div",{className:"my-1.5 ml-2.5 mr-0 flex flex-row sm:mb-0",children:[(0,f.jsxs)("div",{className:"flex w-36 cursor-pointer flex-row items-center",children:[(0,f.jsx)(l.default,{overlay:b.key,parentClasses:"cursor-pointer mx-2.5 text-ellipsis overflow-hidden whitespace-nowrap".concat(n?" dark:text-error-light text-error-dark":""),position:r.YS6,style:{maxWidth:"130px"},children:"".concat(b.key).concat(k?"*":"")}),c&&b.urlText&&(0,f.jsx)(l.default,{backgroundColor:"bg-white border-white dark:bg-gray-400 dark:border-gray-400",overlay:b.urlText&&(0,f.jsx)("div",{className:"".concat(v().instructions," max-h-40 overflow-auto text-left"),dangerouslySetInnerHTML:{__html:"".concat((0,p.markdownToHtml)(b.urlText))}}),overlayParentTextColorClasses:"text-black dark:text-dark-80",overlayParentStyles:{maxWidth:"240px",wordWrap:"break-word"},padding:"p-2.5",parentClasses:"align-middle cursor-pointer dark:hover:text-primary-light dark:text-dark-contrastText duration-200 hover:text-primary inline-flex text-black",position:r.YS6,rootClose:!0,trigger:r.t4j,children:(0,f.jsx)(s.Z,{className:"h-4 w-4 stroke-current"})})]}),c?(0,f.jsxs)("div",{className:"ml-2.5 flex flex-col flex-wrap items-center justify-center sm:flex-row sm:justify-start",children:[(0,f.jsx)("input",{className:"h-6 w-32 rounded border border-solid  pl-2.5  outline-none dark:bg-gray-A100 sm:h-8 sm:w-52 ".concat(n?"border-error-dark dark:border-error":"border-gray-300 dark:border-dark-60"),"data-testid":"edcomponent-keyInput",id:R?"key-extract-".concat(d):"key-".concat(d),disabled:o,placeholder:o&&"Run to auto-generate...",value:m,onChange:function(a){return A(a,b.id)},autoFocus:b.id===F,onFocus:function(){return a.setFocussedKey(b.id)},onBlur:function(){return a.setFocussedKey("")}}),o?(0,f.jsx)(l.default,{overlay:(0,f.jsx)("span",{className:"max-w-xs text-center",children:"Auto generated"}),parentClasses:"align-middle cursor-pointer dark:hover:text-primary-light dark:text-dark-contrastText duration-200 hover:text-primary inline-flex m-2 text-black",position:r.YS6,children:(0,f.jsx)(q.Z,{className:"h-4 w-4"})}):(0,f.jsx)(l.default,{disable:N?!b.defaultValue:!b.value,onClick:function(){return a.setState(function(a){return N?{userEnvKeys:H(G({},a.userEnvKeys),E({},b.id,{val:b.defaultValue,dirty:!0})),userRequiredKeys:{}}:{userRequiredKeys:H(G({},a.userRequiredKeys),E({},b.id,{val:b.value,dirty:!0})),userEnvKeys:{}}})},overlay:b.value?"Use author provided default value":"Author provided default value not available",parentClasses:"align-middle cursor-pointer dark:hover:text-primary-light dark:text-dark-contrastText duration-200 hover:text-primary inline-flex m-2 text-black",position:r.YS6,children:(0,f.jsx)(t.Z,{className:"h-4 w-4 stroke-current"})})]}):(0,f.jsx)("div",{className:"ml-2.5 w-60 overflow-hidden text-ellipsis whitespace-nowrap\n                        ".concat(o?"text-gray-700":""),children:(null==u?void 0:u.loading)?z:m||z})]}),!c&&(0,f.jsx)("div",{style:{width:"98%"},className:"bg-yellow mx-2 my-0 h-0.5 self-center border border-solid border-gray-300 sm:mb-auto sm:ml-2 sm:mr-auto sm:mt-0.5 sm:self-auto"})]},b.key)}),a.state.isImported&&a.state.importedKeys.length>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"flex flex-row items-center justify-between px-5 py-1.5 ".concat(L(!1,!1,!0)),"data-testid":"edcomponent-title",children:(0,f.jsx)("p",{className:"font-normal",children:"The following values have been fetched from uploaded JSON file:"})}),a.state.importedKeys.map(function(b,d){return(0,f.jsxs)(g.Fragment,{children:[(0,f.jsxs)("div",{className:"my-1.5 ml-2.5 mr-0 flex flex-row sm:mb-0 ",children:[(0,f.jsx)(l.default,{backgroundColor:"bg-white border-white dark:bg-gray-400 dark:border-gray-400",overlay:b.key,overlayParentTextColorClasses:"text-black dark:text-dark-80",padding:"p-2.5",parentClasses:"cursor-pointer mx-2.5 text-ellipsis overflow-hidden whitespace-nowrap",position:r.YS6,style:{maxWidth:"130px"},children:b.key}),a.state.importEditMode?(0,f.jsx)("div",{className:"ml-2.5 flex flex-col flex-wrap items-center justify-center sm:flex-row sm:justify-start",children:(0,f.jsx)("input",{className:"h-6 w-32 rounded pl-2.5 outline-none sm:h-8 sm:w-52",id:"key-imported-".concat(d),value:b.val,"data-testid":"edcomponent-keyInput",onChange:function(c){c.persist(),a.setState(function(a){return{importedKeys:o()(a.importedKeys,E({},d,{$set:{key:b.key,val:c.target.value}}))}})}})}):(0,f.jsx)("div",{className:"ml-2.5 w-60 overflow-hidden text-ellipsis whitespace-nowrap",children:b.val})]}),!c&&!a.state.importEditMode&&(0,f.jsx)("div",{style:{width:"98%"},className:"mx-2 my-0 h-0.5 self-center border border-solid border-gray-300 sm:mb-auto sm:ml-2 sm:mr-auto sm:mt-0.5 sm:self-auto"})]},b.key)})]})]}),(0,f.jsxs)("div",{className:"mb-8 ml-2.5 mr-0 mt-9 flex flex-row justify-center self-center transition duration-500 sm:justify-start sm:self-start ".concat(I&&(N?T:Z||U)?"hidden":""),children:[c||$?(0,f.jsxs)("div",{className:"flex",children:[!$&&(0,f.jsx)("button",{className:"outlined-default m-2 py-2",name:z.env.REACT_APP_STANDALONE?N?"selenium-cancel-edit-env":"selenium-cancel-edit-api-keys":null,onClick:C,children:"Cancel"}),!N&&!Z&&(0,f.jsx)("button",{className:"contained-error m-2 py-2",disabled:!V.length,name:N?"clear-edit-env":"clear-edit-api-keys",onClick:X,children:"Clear All"}),(0,f.jsx)("button",{className:"contained-primary m-2 py-2",name:z.env.REACT_APP_STANDALONE?N?"selenium-save-all-env":"selenium-save-all-api-keys":null,disabled:(null==u?void 0:u.loading)||!Y,onClick:function(){return a.saveAlluserStateKeys(w,C,N)},children:"Save"})]}):a.props.isTerminalWidget?(0,f.jsx)(j.Z,{danger:!0,disabled:R,element:"button",handleConfirm:B,name:z.env.REACT_APP_STANDALONE?N?"selenium-edit-env":"selenium-edit-api-keys":null,parentClasses:"contained-primary m-2 py-2",popoverTitle:"Saving new Environment Variables will re-launch your running terminal. Do you wish to proceed?",children:"Edit"}):N?(0,f.jsx)("button",{className:"contained-primary m-2 py-2",name:z.env.REACT_APP_STANDALONE?"selenium-edit-env":null,onClick:B,disabled:R,children:"Edit"}):a.state.isImported?a.state.importedKeys.length>0&&(0,f.jsxs)("div",{className:"flex","data-testid":"edcomponent-importWrapper",children:[!a.state.importEditMode&&(0,f.jsx)("button",{className:"outlined-default m-0 mr-12 py-2",name:"edit-imported-api-keys",onClick:function(){return a.setState({importEditMode:!0})},disabled:R,children:"Edit Values"}),(0,f.jsx)("button",{className:"contained-primary m-0 py-2",name:"save-imported-api-keys",disabled:null==u?void 0:u.loading,onClick:function(){return a.saveImportedKeys()},children:"Save"}),(0,f.jsx)("button",{className:"contained-error m-0 ml-2 py-2",name:"discard-imported-api-keys",disabled:null==u?void 0:u.loading,onClick:function(){return a.setState({importEditMode:!1,isImported:!1,importedKeys:[]})},children:"Discard"})]}):(0,f.jsxs)("div",{className:"flex","data-testid":"edcomponent-importWrapper",children:[(0,f.jsx)("button",{className:"contained-primary m-2 py-2",name:z.env.REACT_APP_STANDALONE?"selenium-edit-api-keys":null,onClick:B,disabled:R,children:"Edit"}),(0,f.jsx)("label",{className:"mx-2.5 my-2 h-10 cursor-pointer rounded-sm border border-solid border-primary bg-primary px-2.5 py-2 text-center text-white transition duration-200 hover:border-primary-dark hover:bg-primary-dark focus:border-primary-dark focus:bg-primary-dark dark:hover:border-primary-light dark:hover:bg-primary-light dark:hover:text-black dark:focus:border-primary-light dark:focus:bg-primary-light dark:focus:text-black",htmlFor:"jsonImport".concat(a.props.compId),children:(0,f.jsx)("span",{className:"text-sm font-bold tracking-wide",children:"Import Values from JSON"})}),(0,f.jsx)("input",{id:"jsonImport".concat(a.props.compId),className:"opacity-0",type:"file",onChange:a.importFile,style:{zIndex:1,width:"0.1px"}}),a.state.importError&&(0,f.jsx)("p",{className:"mt-2 text-base text-warning-dark",children:"Invalid JSON File"}),a.state.noKeysFound&&(0,f.jsx)("p",{className:"mt-2 text-base text-warning-dark",children:"No keys found in JSON file to import values"})]}),(null==u?void 0:u.loading)&&(0,f.jsxs)("div",{className:"flex shrink-0 flex-row items-center",children:[(0,f.jsx)(i.default,{id:"saving-api-keys",size:25}),"Saving..."]})]})]},J)},U=g.cloneElement(this.props.children,{apiKeysToReplace:Object.keys(F).reduce(function(a,b){var c=k.find(function(a){return a.id===b}),d=F[b];return c?H(G({},a),E({},c.key,d.val)):a},{}),apiKeysChanged:J,editingApiKeys:Q||R,renderExtractionWrapper:this.renderExtractionWrapper,renderReplacementWrapper:this.renderReplacementWrapper,renderEnvsWrapper:this.renderEnvsWrapper,onTabChange:function(b){a.props.onTabChange(b),a.setState({userRequiredKeys:{},userExtractedKeys:{},userEnvKeys:{}},function(){a.props.setWidgetWrapper({}),a.populateApiKeys()})},bypassEnvCheck:this.state.bypassEnvCheck,bypassCheckCallback:function(b){return a.setState({bypassEnvCheck:!1},function(){a.closeEnvWrapper(!1,b)})}}),V=c.filter(function(a){return w[a.id]}),W=this.props,X=W.readOnlyApiKeys,Y=W.hideWrapper;return Y?U:[V.length?T(function(b){a.envWrapper=b},d,O?"Values for some environment variables are not provided.":this.state.hideEnvPanel&&!d?"This code requires environment variables to execute.":"This code requires the following environment variables to execute:",V,C,this.setEnvKeyValue,function(){var b=a.props,c=b.setWidgetWrapper,d=b.compId;c({type:"env",compId:d}),a.envFocussedKey=""},this.closeEnvWrapper,this.determineFocusEnv(),!0,"env_wrapper",!0,O):null,k.length?T(function(b){a.requiredWrapper=b},Q&&!X,K.length&&!O?S:this.state.hideRequiredPanel&&!Q?"This code requires user inputs":"Please provide values for the following:",k,F,this.setRequiredKeyValue,function(){var b=a.props,c=b.setWidgetWrapper,d=b.compId;c({type:"required",compId:d}),a.requiredFocussedKey="",a.setState({noKeysFound:!1,importError:!1})},this.closeRequiredWrapper,this.determineFocusRequired(),!0,"required_wrapper",!1,Boolean(K.length)&&!O):null,U,n.length&&R?T(function(b){a.extractedWrapper=b},R&&!X,"The following keys were extracted from the execution output: ",n,I,this.setExtractedKeyValue,function(){(0,a.props.setWidgetWrapper)({})},this.closeExtractionWrapper,this.determineFocusExtraction(),!1,"extract_wrapper",!1):null,]},n}(g.Component);N.defaultProps={selectedEnvVars:{}},b.Z=N},77772:function(a,b,c){"use strict";var d=c(20348),e=c(89703),f=c(26410),g=c(82729),h=c(32388),i=c(64889),j=c(22609),k=c(80049),l=c(98658),m=c(30601),n=c(34001);function o(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function p(a){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function q(a,b){return(q=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var r=function(a){var b=a.comments,c=b.commentCounts;return{selectedDocument:b.selectedDocument,commentCounts:c.loaded?c.data:null}},s=function(a,b,c){var d,e,f=c.documentKey,g=a.commentCounts,h=a.selectedDocument,i=function(a,b){if(null==a)return{};var c,d,e=function a(b,c){if(null==b)return{};var d,e,f={},g=Object.keys(b);for(e=0;e<g.length;e++)d=g[e],c.indexOf(d)>=0||(f[d]=b[d]);return f}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,["commentCounts","selectedDocument"]),j=f&&(null==g?void 0:g[f])||0,k=h.key||null;return d=function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){o(a,b,c[b])})}return a}({},i,b,c),e=(e={selectedDocumentKey:k,commentsCount:j},e),Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(e)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(e)).forEach(function(a){Object.defineProperty(d,a,Object.getOwnPropertyDescriptor(e,a))}),d},t=function(a){!function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&q(a,b)}(i,a);var b,c,e=(b=i,c=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var a,d,e,f,g=p(b);if(c){var h=p(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return d=this,(e=f)&&("object"==(a=e,a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a)||"function"==typeof e)?e:function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function i(){var a;return!function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,i),a=e.apply(this,arguments),a.toggleSelected=function(){var b=a.props,c=b.dispatch,d=b.selectedDocumentKey,e=b.documentKey,f=b.widgetType;if(d!==e){c(j.T.set(e));var g,h,i=null!==(h=null===(g=(0,m.Tc)(f))|| void 0===g?void 0:g.title)&& void 0!==h?h:f;c(j.T.setWidgetTitle(i))}else c(j.T.clear())},a.renderMenuButton=function(){var b=a.props,c=b.commentsCount,e=b.selectedDocumentKey,i=b.documentKey,j=e===i;return(0,d.jsxs)(l.Z,{className:"relative ".concat(j?"!bg-primary !text-white":""," hover:!bg-primary hover:!text-white"),circleButton:!0,onClick:a.toggleSelected,name:n.env.REACT_APP_STANDALONE?"selenium-comments-menu-button":null,children:[(0,d.jsx)(g.default,{overlay:j?"Close":c>0?"View comments":"Create comment",parentClasses:"flex",position:h.YS6,children:(0,d.jsx)(f.Z,{className:"h-5 w-5"})},"comment-context-menu-button-overlay"),c>0&&!j&&(0,d.jsx)("span",{className:"absolute z-10 -mt-3 ml-3 flex h-4 w-auto items-center justify-center rounded-full bg-primary px-0.5 text-white",id:n.env.REACT_APP_STANDALONE?"selenium-comments-count":null,children:c})]})},a}return i.prototype.render=function(){var a=this.props.inPreview;return(0,d.jsx)("div",{className:"absolute -right-4 ".concat(a?"-top-8":"-top-9"),children:this.renderMenuButton()})},i}(e.Component),u=(0,i.$j)(r,null,s);b.Z=(0,k.withRouter)(u(t))},1632:function(a,b,c){"use strict";c.d(b,{n:function(){return e},u:function(){return f}});var d=c(63910),e=function(a,b){return d.LS(a,JSON.stringify(b))},f=function(a){return d.rV(a)}},62474:function(a){a.exports={instructions:"EdComponentApiKeyWrapper_instructions__FAaWr",dark:"dark"}},28394:function(a,b,c){"use strict";var d,e=c(89703);function f(){return(f=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}var g=function(a){return e.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-maximize"},a),d||(d=e.createElement("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})))};b.Z=g},26410:function(a,b,c){"use strict";var d,e=c(89703);function f(){return(f=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}var g=function(a){return e.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-message-square"},a),d||(d=e.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})))};b.Z=g},52700:function(a,b,c){"use strict";var d,e=c(89703);function f(){return(f=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}var g=function(a){return e.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-minimize"},a),d||(d=e.createElement("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})))};b.Z=g}}])
//# sourceMappingURL=39794-f5f3695dccb38d88.js.map